<!DOCTYPE html>

<html>
<head>
<title>New Tab</title>
<style type="text/css">
html {
    width: 100%;
    height: 100%;
}
body {
    text-align: center;
    margin-top: 4em;
}
#container {
    display: table;
    margin: auto;
    text-align: left;
}
#fortune {
    max-width: 48em;
}
</style>
<script>
function randomFortune(text) {
    var fortunes = text.split('\n%\n');
    var i = Math.floor(Math.random() * fortunes.length);
    return fortunes[i];
}
function init() {
    document.body.style.background = '-webkit-gradient(linear,0 0,0 100%,' +
        'from(' + localStorage['backgroundFrom'] + '),' +
        'to(' + localStorage['backgroundTo'] + '))';
    with (document.getElementById('fortune')) {
        innerText = randomFortune(localStorage['fortunes']);
        style.font = localStorage['font'];
    }
}
</script>
</head>

<body onload="init();">
<div id="container">
<p id="fortune" />
</div>
</body>
</html>
